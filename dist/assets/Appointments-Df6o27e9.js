import{f as w,g as V,c as d,o as n,a as D,b as e,w as U,h as N,u as $,P as T,i as u,v as p,F as v,r as f,t as a,n as k,j as c,k as C}from"./app-C7YuJVyk.js";import{S as A}from"./sweetalert2.esm.all-B0Dix5B2.js";const E={class:"py-12 bg-gray-800 min-h-screen"},P={class:"flex flex-col md:flex-row md:justify-between mb-6"},B={class:"hidden md:block"},M={class:"w-full bg-gray-900 shadow-md rounded-lg overflow-hidden"},j={class:"p-5 text-white"},F={class:"p-5 text-white"},I={class:"p-5 text-white"},z={key:0},H={key:1},O={class:"p-5"},Q={class:"p-5 text-center"},R={key:0},q=["onUpdate:modelValue","min"],G=["onClick"],J=["onClick"],K={class:"md:hidden"},W={class:"mb-4"},X={class:"text-white"},Y={class:"mb-4"},Z={class:"text-white"},ee={class:"mb-4"},te={class:"text-white"},se={key:0},oe={key:1},le={class:"mb-4"},de={class:"mt-4"},ne={key:0},ae=["onUpdate:modelValue","min"],re=["onClick"],ie=["onClick"],pe={__name:"Appointments",props:{appointments:Array},setup(S){const i=S,r=w(""),h=w(new Date().toISOString().slice(0,16)),m=V(()=>i.appointments.filter(l=>l.user.name.toLowerCase().includes(r.value.toLowerCase())||l.assessment.type.toLowerCase().includes(r.value.toLowerCase())||l.status.toLowerCase().includes(r.value.toLowerCase()))),g=l=>({pending:"bg-red-500",approved:"bg-blue-500",completed:"bg-green-500"})[l]||"bg-gray-500",b=async l=>{var s,t;try{const o=await C.post(`/appointments/${l.id}/approve`,{scheduled_at:l.scheduled_at});if(o.status===200){const x=o.data.appointment,y=i.appointments.findIndex(L=>L.id===x.id);y!==-1&&(i.appointments[y]=x),A.fire("Appointment Approved!","The appointment has been approved and scheduled.","success")}}catch(o){console.error("Error approving appointment:",o),A.fire("Error!",((t=(s=o.response)==null?void 0:s.data)==null?void 0:t.message)||"An unexpected error occurred. Please try again.","error")}},_=async l=>{try{const s=await C.post(`/appointments/${l}/complete`),t=i.appointments.find(o=>o.id===l);t&&(t.status="completed")}catch(s){console.error("Error completing appointment:",s),alert("An error occurred while completing the appointment. Please try again.")}};return(l,s)=>(n(),d("div",E,[D($(T),{href:l.route("admin.home"),class:"inline-block mt-4 px-6 py-3 bg-blue-600 text-white rounded-lg shadow-md hover:bg-blue-700 transition"},{default:U(()=>s[1]||(s[1]=[N(" ← Return to Home ")])),_:1},8,["href"]),s[7]||(s[7]=e("h1",{class:"text-3xl font-bold text-white mt-6 mb-8"},"Appointments",-1)),e("div",P,[u(e("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=t=>r.value=t),placeholder:"Search by user name, assessment, or status...",class:"p-3 border-2 rounded-lg w-full md:w-1/3 bg-gray-700 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[p,r.value]])]),e("div",B,[e("table",M,[s[2]||(s[2]=e("thead",{class:"bg-gray-800 text-white"},[e("tr",null,[e("th",{scope:"col",class:"p-5 text-left"},"User"),e("th",{scope:"col",class:"p-5 text-left"},"Assessment Type"),e("th",{scope:"col",class:"p-5 text-left"},"Scheduled Date"),e("th",{scope:"col",class:"p-5 text-left"},"Status"),e("th",{scope:"col",class:"p-5 text-center"},"Actions")])],-1)),e("tbody",null,[(n(!0),d(v,null,f(m.value,t=>(n(),d("tr",{key:t.id,class:"border-t hover:bg-gray-700"},[e("td",j,a(t.user.name),1),e("td",F,a(t.assessment.type),1),e("td",I,[t.scheduled_at?(n(),d("span",z,a(new Date(t.scheduled_at).toLocaleString()),1)):(n(),d("span",H,"Not scheduled yet"))]),e("td",O,[e("span",{class:k(["px-4 py-2 rounded-lg text-sm font-semibold",g(t.status)])},a(t.status),3)]),e("td",Q,[t.status==="pending"?(n(),d("div",R,[u(e("input",{"onUpdate:modelValue":o=>t.scheduled_at=o,type:"datetime-local",class:"p-3 border-2 rounded-lg w-36 mb-2 bg-gray-700 text-white",min:h.value},null,8,q),[[p,t.scheduled_at]]),e("button",{onClick:o=>b(t),class:"bg-blue-600 hover:bg-blue-700 text-white px-5 py-2 rounded-lg"}," Approve Appointment ",8,G)])):c("",!0),t.status==="approved"?(n(),d("button",{key:1,onClick:o=>_(t.id),class:"bg-green-600 hover:bg-green-700 text-white px-5 py-2 rounded-lg"}," Mark as Completed ",8,J)):c("",!0)])]))),128))])])]),e("div",K,[(n(!0),d(v,null,f(m.value,t=>(n(),d("div",{key:t.id,class:"bg-gray-700 p-5 mb-6 rounded-lg shadow-md"},[e("div",W,[s[3]||(s[3]=e("h4",{class:"text-lg font-semibold text-white"},"User:",-1)),e("p",X,a(t.user.name),1)]),e("div",Y,[s[4]||(s[4]=e("h4",{class:"text-lg font-semibold text-white"},"Assessment Type:",-1)),e("p",Z,a(t.assessment.type),1)]),e("div",ee,[s[5]||(s[5]=e("h4",{class:"text-lg font-semibold text-white"},"Scheduled Date:",-1)),e("p",te,[t.scheduled_at?(n(),d("span",se,a(new Date(t.scheduled_at).toLocaleString()),1)):(n(),d("span",oe,"Not scheduled yet"))])]),e("div",le,[s[6]||(s[6]=e("h4",{class:"text-lg font-semibold text-white"},"Status:",-1)),e("span",{class:k(["px-4 py-2 rounded-lg text-sm font-semibold",g(t.status)])},a(t.status),3)]),e("div",de,[t.status==="pending"?(n(),d("div",ne,[u(e("input",{"onUpdate:modelValue":o=>t.scheduled_at=o,type:"datetime-local",class:"p-3 border-2 rounded-lg w-full mb-4 bg-gray-700 text-white",min:h.value},null,8,ae),[[p,t.scheduled_at]]),e("button",{onClick:o=>b(t),class:"bg-blue-600 hover:bg-blue-700 text-white px-5 py-3 rounded-lg w-full"}," Approve Appointment ",8,re)])):c("",!0),t.status==="approved"?(n(),d("button",{key:1,onClick:o=>_(t.id),class:"bg-green-600 hover:bg-green-700 text-white px-5 py-3 rounded-lg w-full"}," Mark as Completed ",8,ie)):c("",!0)])]))),128))])]))}};export{pe as default};
