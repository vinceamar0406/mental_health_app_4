import{n as q,k as C,H as L,p as y,q as B,o as m,w as F,a as f,b as e,u as D,m as O,c as p,F as v,r as w,t as d,f as c,y as x,I as h,K as E,W as g}from"./app-LayFgEfl.js";import{_ as A}from"./AuthenticatedLayout-DPyQKLkO.js";import{_ as V}from"./Header-CaqgEGJT.js";import{S as r}from"./sweetalert2.esm.all-B0Dix5B2.js";import"./NavLink-DE2x0Iuc.js";const M={class:"min-h-screen bg-blue-100 dark:bg-gray-900 flex items-center justify-center"},T={class:"w-full max-w-4xl bg-blue-200 dark:bg-gray-800 shadow-lg rounded-lg border border-blue-300 dark:border-gray-700"},j={class:"p-8 text-gray-900 dark:text-gray-100"},H={class:"space-y-6"},I={class:"block font-medium text-lg text-gray-800 dark:text-gray-200"},N={class:"flex gap-6 mt-2"},U={class:"flex items-center gap-2 text-gray-700 dark:text-gray-300"},$=["onUpdate:modelValue"],P={class:"flex items-center gap-2 text-gray-700 dark:text-gray-300"},Y=["onUpdate:modelValue"],R={class:"p-4 bg-blue-100 dark:bg-gray-700 rounded-lg"},J={class:"mt-8 p-4 bg-blue-100 dark:bg-gray-700 rounded-lg"},K={class:"w-full mt-2 border border-gray-300 dark:border-gray-600"},W={class:"p-2 border"},z={class:"p-2 border"},G={class:"mt-6"},oe={__name:"EatingDisorderAssessment",setup(Q){const k=q(),n=C(!1),s=L({q1:null,q2:null,q3:null,q4:null,q5:null,impact:null}),b=[{min:0,max:1,label:"Low risk"},{min:2,max:3,label:"Moderate risk"},{min:4,max:5,label:"High risk"}],u=y(()=>Object.values(s).reduce((i,t)=>i+(parseInt(t)||0),0)),_=y(()=>{var i;return((i=b.find(t=>u.value>=t.min&&u.value<=t.max))==null?void 0:i.label)||"Unknown"}),S=async()=>{var o,a;if(n.value)return;if(Object.keys(s).find(l=>s[l]===null||s[l]==="")){r.fire({icon:"error",title:"Incomplete Answers",text:"Please answer all questions before submitting.",confirmButtonColor:"#3085d6"});return}if((await r.fire({title:"Submit Assessment?",text:"Do you want to save the assessment in the database?",icon:"question",showCancelButton:!0,confirmButtonText:"Yes, save it!",cancelButtonText:"No, just view results",confirmButtonColor:"#3085d6",cancelButtonColor:"#d33"})).isConfirmed){r.fire({title:"Submitting...",text:"Please wait while we save your assessment.",allowOutsideClick:!1,didOpen:()=>{r.showLoading()}}),n.value=!0;try{g.post("/assessment/eating-disorder/store",{user_id:(a=(o=k.props.auth)==null?void 0:o.user)==null?void 0:a.id,responses:Object.values(s).slice(0,7),impact:s.impact,total_score:u.value,severity:_.value},{replace:!0,onSuccess:()=>{n.value=!1,r.fire({title:"Saved!",text:"Your assessment has been recorded.",icon:"success",showConfirmButton:!1,timer:2e3}),setTimeout(()=>{g.get("/assessment/eating-disorder/results")},2e3)},onError:()=>{n.value=!1,r.fire("Error","Failed to submit assessment. Please try again.","error")}})}catch(l){console.error("Error submitting assessment:",l),r.fire("Error","Failed to submit assessment. Please try again.","error"),n.value=!1}}else r.fire({title:"Redirecting...",text:"Please wait while we load your results.",allowOutsideClick:!1,didOpen:()=>r.showLoading()}),setTimeout(()=>{r.close(),g.get("/assessment/eating-disorder/results")},500)};return(i,t)=>(m(),B(A,null,{default:F(()=>[f(D(O),{title:"Eating Disorder Assessment"}),e("div",M,[e("div",T,[f(V,{title:"SCOFF Eating Disorder Screening",subtitle:"Answer the following questions with Yes or No."}),e("div",j,[e("div",H,[(m(),p(v,null,w(["Do you make yourself Sick because you feel uncomfortably full?","Do you worry you have lost Control over how much you eat?","Have you recently lost One stone (14 pounds or 6.35 kg) in a 3-month period?","Do you believe yourself to be Fat when others say you are too thin?","Would you say that Food dominates your life?"],(o,a)=>e("div",{key:a,class:"p-4 bg-blue-100 dark:bg-gray-700 rounded-lg"},[e("label",I,d(o),1),e("div",N,[e("label",U,[c(e("input",{type:"radio",value:1,"onUpdate:modelValue":l=>s[`q${a+1}`]=l,class:"form-radio"},null,8,$),[[h,s[`q${a+1}`]]]),t[1]||(t[1]=x(" Yes "))]),e("label",P,[c(e("input",{type:"radio",value:0,"onUpdate:modelValue":l=>s[`q${a+1}`]=l,class:"form-radio"},null,8,Y),[[h,s[`q${a+1}`]]]),t[2]||(t[2]=x(" No "))])])])),64))]),e("div",R,[t[4]||(t[4]=e("label",{class:"block text-lg font-medium text-gray-800 dark:text-gray-200"},"Impact Level",-1)),c(e("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>s.impact=o),class:"form-select mt-2 p-2 border border-gray-300 rounded-lg w-full"},t[3]||(t[3]=[e("option",{value:""},"Select Impact Level",-1),e("option",{value:"Low"},"Low",-1),e("option",{value:"Moderate"},"Moderate",-1),e("option",{value:"High"},"High",-1)]),512),[[E,s.impact]])]),e("div",J,[t[6]||(t[6]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-gray-100"},"Eating Disorder Severity Levels",-1)),t[7]||(t[7]=e("p",{class:"text-gray-800 dark:text-gray-300"},"Your total score determines the severity of your eating disorder risk.",-1)),e("table",K,[t[5]||(t[5]=e("thead",null,[e("tr",{class:"bg-blue-300 dark:bg-gray-600"},[e("th",{class:"p-2 border"},"Total Score"),e("th",{class:"p-2 border"},"Severity Level")])],-1)),e("tbody",null,[(m(),p(v,null,w(b,o=>e("tr",{key:o.label},[e("td",W,d(o.min)+"–"+d(o.max),1),e("td",z,d(o.label),1)])),64))])])]),e("div",G,[e("button",{onClick:S,class:"w-full bg-blue-600 text-white py-3 rounded-lg text-lg font-semibold hover:bg-blue-700 transition"},d(n.value?"Submitting...":"Submit Assessment"),1)]),t[8]||(t[8]=e("div",{class:"mt-6 p-4 bg-gray-200 dark:bg-gray-700 rounded-lg"},[e("h3",{class:"text-lg font-semibold"},"Reference"),e("p",{class:"text-sm"},"Morgan, J. F., Reid, F., & Lacey, J. H. (1999). The SCOFF questionnaire: Assessment of a new screening tool for eating disorders. BMJ, 319(7223), 1467–1468.DOI: 10.1136/bmj.319.7223.1467")],-1))])])])]),_:1}))}};export{oe as default};
