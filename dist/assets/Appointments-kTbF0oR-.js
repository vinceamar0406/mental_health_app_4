import{d as k,e as S,c as r,o as a,a as c,u as p,m as L,w as m,b as e,P as B,f as V,g,v as b,F as h,r as U,t as i,n as D,h as y,i as x}from"./app-Dk-EDSe_.js";import{A as N}from"./AdminLayout-qQ7ZEtSz.js";import{S as n}from"./sweetalert2.esm.all-B0Dix5B2.js";import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"ziggy";import"./NavLink-Cm9f6Oqy.js";const $={class:"flex-1 p-8 space-y-8"},E={class:"bg-white shadow-lg rounded-lg p-6 w-full max-w-6xl mx-auto flex justify-between items-center"},M={class:"bg-white shadow-lg rounded-lg p-6 w-full max-w-6xl mx-auto"},P={class:"bg-white shadow-lg rounded-lg p-6 w-full max-w-6xl mx-auto overflow-x-auto"},j={class:"w-full border-collapse border border-gray-700 sm:table-auto"},q={class:"border border-gray-700 px-4 py-2 text-gray-800"},F={class:"border border-gray-700 px-4 py-2 text-gray-800"},H={class:"border border-gray-700 px-4 py-2 text-gray-800"},I={key:0},O={key:1},R={class:"border border-gray-700 px-4 py-2"},z={class:"border border-gray-700 px-4 py-2 text-center"},Q={key:0,class:"flex items-center space-x-6"},Y=["onUpdate:modelValue"],G=["onClick"],J=["onClick"],K={__name:"Appointments",props:{appointments:Array},setup(f){const u=f,d=k(""),w=S(()=>u.appointments.filter(s=>s.user.name.toLowerCase().includes(d.value.toLowerCase())||s.assessment.type.toLowerCase().includes(d.value.toLowerCase())||s.status.toLowerCase().includes(d.value.toLowerCase()))),_=s=>{switch(s){case"pending":return"bg-yellow-500";case"approved":return"bg-blue-600";case"completed":return"bg-green-600";default:return"bg-gray-500"}},v=async s=>{try{n.fire({title:"Approving Appointment...",text:"Please wait while we process the request.",imageUrl:"https://via.placeholder.com/150",showConfirmButton:!1,allowOutsideClick:!1,willOpen:()=>{n.showLoading()}});const t=(await x.post(`/appointments/${s.id}/approve`,{scheduled_at:s.scheduled_at})).data.appointment,l=u.appointments.findIndex(A=>A.id===t.id);l!==-1&&(u.appointments[l]=t),n.fire("Success!","Appointment approved.","success"),location.reload()}catch{n.fire("Error!","Something went wrong.","error")}},C=async s=>{if((await n.fire({title:"Are you sure?",text:"Do you want to mark this appointment as completed?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, mark as completed!"})).isConfirmed)try{await x.post(`/appointments/${s}/complete`),n.fire("Success!","Appointment marked as completed.","success")}catch{n.fire("Error!","Something went wrong.","error")}};return(s,o)=>(a(),r(h,null,[c(p(L),{title:"Appointments"}),c(N,null,{default:m(()=>[e("div",$,[e("div",E,[o[2]||(o[2]=e("div",null,[e("h1",{class:"text-4xl font-semibold text-gray-900"},"Appointments"),e("p",{class:"text-gray-600 mt-2"},"Manage all appointment requests efficiently.")],-1)),c(p(B),{href:s.route("admin.home"),class:"inline-block px-6 py-3 bg-blue-500 text-white rounded-lg shadow-lg hover:bg-blue-600 focus:outline-none focus:ring-4 focus:ring-blue-300 transition-all duration-200 ease-in-out",role:"button","aria-label":"Return to Home"},{default:m(()=>o[1]||(o[1]=[V(" ← Return to Home ")])),_:1},8,["href"])]),e("div",M,[g(e("input",{"onUpdate:modelValue":o[0]||(o[0]=t=>d.value=t),type:"text",class:"w-full px-4 py-2 border border-gray-300 rounded-lg",placeholder:"Search by user name, assessment, or status..."},null,512),[[b,d.value]])]),e("div",P,[e("table",j,[o[3]||(o[3]=e("thead",{class:"bg-blue-200"},[e("tr",null,[e("th",{class:"border border-gray-700 px-4 py-2 text-left"},"User"),e("th",{class:"border border-gray-700 px-4 py-2 text-left"},"Assessment Type"),e("th",{class:"border border-gray-700 px-4 py-2 text-left"},"Scheduled Date"),e("th",{class:"border border-gray-700 px-4 py-2 text-left"},"Status"),e("th",{class:"border border-gray-700 px-4 py-2 text-center"},"Actions")])],-1)),e("tbody",null,[(a(!0),r(h,null,U(w.value,t=>(a(),r("tr",{key:t.id,class:"border-b border-gray-700 hover:bg-blue-50"},[e("td",q,i(t.user.name),1),e("td",F,i(t.assessment.type),1),e("td",H,[t.appointment_date?(a(),r("span",I,i(new Date(t.appointment_date).toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!0})),1)):(a(),r("span",O,"Not scheduled yet"))]),e("td",R,[e("span",{class:D(["px-4 py-2 rounded-lg text-sm font-semibold",_(t.status)])},i(t.status),3)]),e("td",z,[t.status==="pending"?(a(),r("div",Q,[g(e("input",{"onUpdate:modelValue":l=>t.scheduled_at=l,type:"datetime-local",class:"p-2 border-2 rounded-lg w-36 bg-gray-700 text-white",style:{height:"40px","line-height":"40px"}},null,8,Y),[[b,t.scheduled_at]]),e("button",{onClick:l=>v(t),class:"bg-blue-600 hover:bg-blue-700 text-white px-5 py-2 rounded-lg",style:{height:"40px",display:"flex","align-items":"center","justify-content":"center"}}," Approve Appointment ",8,G)])):y("",!0),t.status==="approved"?(a(),r("button",{key:1,onClick:l=>C(t.id),class:"bg-green-600 hover:bg-green-700 text-white px-5 py-2 rounded-lg mx-auto block"}," Mark as Completed ",8,J)):y("",!0)])]))),128))])])])])]),_:1})],64))}},oe=T(K,[["__scopeId","data-v-4bdfdbbb"]]);export{oe as default};
