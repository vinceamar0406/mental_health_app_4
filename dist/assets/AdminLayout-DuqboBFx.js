import{n as C,k as c,J as A,G as m,c as l,o as u,b as s,a as n,w as o,u as $,P as L,y as a,C as h,F as N,r as D,t as E,i as V}from"./app-LayFgEfl.js";import{_ as f,a as v,b as O}from"./NavLink-DE2x0Iuc.js";import{_ as P}from"./_plugin-vue_export-helper-DlAUqK2U.js";const B={class:"flex-1 p-6 bg-blue-100 dark:bg-gray-900"},S={class:"border-b border-blue-300 bg-blue-200 dark:border-blue-300 dark:bg-blue-300"},j={class:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8"},F={class:"flex h-16 justify-between items-center"},I={class:"flex items-center space-x-8"},M={class:"flex shrink-0 items-center"},R={class:"hidden sm:flex space-x-8"},U={class:"hidden sm:flex sm:items-center"},G={class:"relative ms-3"},J={key:0,class:"absolute right-0 mt-2 w-72 bg-white shadow-lg rounded-lg"},T={class:"divide-y divide-gray-200"},q=["onClick"],z={key:0,class:"text-xs text-gray-500"},H={class:"relative ms-3"},K={type:"button",class:"flex items-center rounded-full bg-gray-800 text-sm focus:ring-2 focus:ring-white"},Q=["src"],W={__name:"AdminLayout",setup(X){const{url:Y}=C(),r=c([]),d=c(!1),p=c(!1),g=c(null);A(()=>{b()});const b=async()=>{p.value=!0,g.value=null;try{const e=await m.get("/admin/notifications");r.value=e.data.notifications||[]}catch(e){g.value=e,console.error("Error fetching notifications:",e)}finally{p.value=!1}},y=async e=>{const t=r.value[e];try{await m.post(`/admin/notifications/${t.id}/read`),r.value[e].read_at=new Date().toISOString(),w()}catch(i){console.error("Error marking notification as read:",i)}},_=()=>{d.value=!d.value},w=()=>{d.value=!1},x=async()=>{try{await m.post("/admin/notifications/clear"),r.value=[]}catch(e){console.error("Error clearing notifications:",e)}};return(e,t)=>(u(),l("div",B,[s("nav",S,[s("div",j,[s("div",F,[s("div",I,[s("div",M,[n($(L),{href:e.route("admin.home")},{default:o(()=>t[0]||(t[0]=[s("img",{src:"/images/counselcarelogo.png",alt:"Counsel & Care Logo",class:"h-9 w-auto"},null,-1)])),_:1},8,["href"])]),s("div",R,[n(f,{href:e.route("admin.home"),active:e.route().current("admin.home"),class:"px-4 py-2 rounded-md hover:bg-blue-300 transition-all duration-200 focus:outline-none"},{default:o(()=>t[1]||(t[1]=[a(" Dashboard ")])),_:1},8,["href","active"]),n(f,{href:e.route("admin.users"),active:e.route().current("admin.users"),class:"px-4 py-2 rounded-md hover:bg-blue-300 transition-all duration-200 focus:outline-none"},{default:o(()=>t[2]||(t[2]=[a(" Users ")])),_:1},8,["href","active"]),n(f,{href:e.route("admin.assessments"),active:e.route().current("admin.assessments"),class:"px-4 py-2 rounded-md hover:bg-blue-300 transition-all duration-200 focus:outline-none"},{default:o(()=>t[3]||(t[3]=[a(" Assessments ")])),_:1},8,["href","active"]),n(f,{href:e.route("admin.appointments"),active:e.route().current("admin.appointments"),class:"px-4 py-2 rounded-md hover:bg-blue-300 transition-all duration-200 focus:outline-none"},{default:o(()=>t[4]||(t[4]=[a(" Appointments ")])),_:1},8,["href","active"])])]),s("div",U,[s("div",G,[s("button",{onClick:_,class:"p-2 text-white bg-blue-500 rounded-full"},t[5]||(t[5]=[s("span",{class:"sr-only"},"Open notifications",-1),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",class:"w-6 h-6"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405C18.526 15.658 18 14.457 18 13V9a6 6 0 10-12 0v4c0 1.457-.526 2.658-1.595 2.595L4 17h5m6 0V9a3 3 0 00-6 0v8m6 4h-6"})],-1)])),d.value?(u(),l("div",J,[t[6]||(t[6]=s("div",{class:"py-2 px-4 text-lg font-semibold text-gray-900"}," Notifications ",-1)),s("ul",T,[(u(!0),l(N,null,D(r.value,(i,k)=>(u(),l("li",{key:i.id,class:"px-4 py-2 text-sm text-gray-700 cursor-pointer",onClick:Z=>y(k)},[s("span",null,E(i.message),1),i.read_at?(u(),l("span",z,"Read")):h("",!0)],8,q))),128))]),s("div",{class:"p-2 text-center"},[s("button",{onClick:x,class:"text-blue-500 hover:text-blue-700"}," Clear All ")])])):h("",!0)]),s("div",H,[n(O,{align:"right",width:"48"},{trigger:o(()=>[s("button",K,[t[7]||(t[7]=s("span",{class:"sr-only"},"Open user menu",-1)),s("img",{class:"w-8 h-8 rounded-full",src:e.$page.props.auth.user.profile_photo_url||"https://ui-avatars.com/api/?name="+e.$page.props.auth.user.name,alt:"User Profile Picture"},null,8,Q)])]),content:o(()=>[n(v,{href:e.route("profile.edit")},{default:o(()=>t[8]||(t[8]=[a(" Edit Profile ")])),_:1},8,["href"]),n(v,{href:e.route("logout"),method:"post",as:"button"},{default:o(()=>t[9]||(t[9]=[a(" Log Out ")])),_:1},8,["href"])]),_:1})])])])])]),s("main",null,[V(e.$slots,"default",{},void 0,!0)])]))}},oe=P(W,[["__scopeId","data-v-f531698d"]]);export{oe as A};
